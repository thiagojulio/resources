(function(){var e,t,n=function(e,t){return function(){return e.apply(t,arguments)}},o=function(e,t){function n(){this.constructor=e}for(var o in t)i.call(t,o)&&(e[o]=t[o]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},i={}.hasOwnProperty;window.log=function(){var e;if(null!=(null!=(e=window.console)?e.log:void 0))return console.log(arguments.length<=1?arguments[0]:arguments)},this.Utilities=function(){function e(){this.fireEvent=n(this.fireEvent,this)}return e.prototype.setTimezoneCookies=function(){var e,t,n;return e="undefined"!=typeof Intl&&null!==Intl?Intl.DateTimeFormat().resolvedOptions().timeZone:void 0,t=null!=(n=new Date)?n.getTimezoneOffset():void 0,document.cookie="timezone_name="+e,document.cookie="timezone_offset="+t},e.prototype.dataURItoBlob=function(e){var t,n,o,i;for(n=atob(e.split(",")[1]),i=e.split(";")[0].split(":")[1],t=[],o=0;o<n.length;)t.push(n.charCodeAt(o)),o++;return new Blob([new Uint8Array(t)],{type:i})},e.prototype.eachElement=function(e,t,n){var o,i;for(null==n&&(n=this),o=0,i=[];o<e.length;)t.call(n,e[o],o),i.push(o++);return i},e.prototype.pushMessage=function(e,t){return null==t&&(t={}),window.parent.postMessage([e,t],"*")},e.prototype.setStyles=function(e,t){var n,o;o=[];for(n in t)o.push(e.style[n]=t[n]);return o},e.prototype.fireEvent=function(e,t){if(this.options[e])return this.options[e].call(this,t)},e.prototype.setupEvents=function(e,t){var n,o,i;i=[];for(o in e)n=e[o],n?i.push(n.addEvents(t[o])):i.push(void 0);return i},e.prototype.hasParentElement=function(e,t){for(;e&&e!==t;)e=e.parentNode;return e},e.prototype.createHTML=function(e){return document.createRange().createContextualFragment(e)},e.prototype.durationToGMT=function(e){var t;return t=new Date,t.setTime(t.getTime()+24*e*60*60*1e3),t.toGMTString()},e.prototype.momentTo=function(e){var t;return t=moment().to(e),t="a few seconds ago"===t?"just now":t,(moment(e).isAfter(moment())?"Scheduled ":"")+t},e}(),e=function(e){function t(){this.hideDropdown=n(this.hideDropdown,this),this.toggleDropdown=n(this.toggleDropdown,this);var e,t,o,i,r,s,l;for(this.elements={actions:document.querySelector("#nav-dropdown"),dropdown:document.querySelector("#nav-cont"),logout:document.querySelector("#logout"),hide:document.body},this.setTimezoneCookies(),i=document.querySelectorAll("pre code"),t=0,o=i.length;t<o;t++)e=i[t],hljs.highlightBlock(e);null!=(r=this.elements.actions)&&r.addEventListener("click",this.toggleDropdown),null!=(s=this.elements.dropdown)&&s.addEventListener("click",this.hideDropdown),null!=(l=this.elements.logout)&&l.addEventListener("click",this.logout)}return o(t,e),t.prototype.toggleDropdown=function(e){return null!=e&&e.preventDefault(),null!=e&&e.stopPropagation(),this.elements.dropdown.classList.toggle("visibleDropdown")},t.prototype.hideDropdown=function(){return this.elements.dropdown.classList.remove("visibleDropdown")},t.prototype.logout=function(e){var t,n,o;return null!=e&&e.preventDefault(),null!=e&&e.stopPropagation(),t=document.createElement("form"),document.body.appendChild(t),t.action=this.getAttribute("data-href"),t.method="post",o=document.createElement("input"),t.appendChild(o),o.name="authenticity_token",o.value=appConfig.csrf,n=document.createElement("input"),t.appendChild(n),n.name="_method",n.value="DELETE",t.submit()},t}(this.Utilities),t=function(e){function t(){this.setLayoutColor=n(this.setLayoutColor,this),this.closeBanner=n(this.closeBanner,this),this.loadMore=n(this.loadMore,this),this.date2moment=n(this.date2moment,this),this.requestModule=n(this.requestModule,this);var e,t,o,i,r,s,l,a,u,c,d,m,h,p;if(p=this,this.token=null!=(o=document.querySelector("meta[name='csrf-token']"))?o.getAttribute("content"):void 0,this.elements={header:document.querySelector("header"),requesters:document.querySelectorAll("a[data-method]"),banner:document.querySelector(".awesomeBanner"),loadMore:document.querySelector(".pagination a"),closeNaggerSetup:document.querySelector(".naggerCont.setup .closeNagger"),closeNaggerTestimonial:document.querySelector(".naggerCont.testimonial .closeNagger")},this.nextPage=2,document.querySelector("#global-nav")&&(this.elements.nav=document.getElements("#global-nav .gnItem a"),this.elements.mailchimp=document.getElement("#mc-embedded-subscribe-form"),null!=(i=this.elements.nav)&&i.addEvent("click",this.switchModule),null!=(r=this.elements.mailchimp)&&r.addEvent("submit",this.requestModule)),this.date2moment(),document.body.className="",(null!=(s=window.appConfig)?s.baseColor:void 0)&&this.setLayoutColor(window.appConfig.baseColor),this.elements.banner.addEventListener("click",this.closeBanner),null!=(l=this.elements.loadMore)&&l.addEventListener("click",this.loadMore),p=this,this.elements.requesters.length>0)for(a=this.elements.requesters,e=0,t=a.length;e<t;e++)h=a[e],h.addEventListener("click",function(e){var t;return e.preventDefault(),e.stopPropagation(),t=new Request.JSON({url:this.href,method:this.dataset.method,data:{authenticity_token:p.token},onSuccess:function(e){if(e.redirect)return window.location=e.redirect}}),t.send()});null!=(u=this.elements.closeNaggerSetup)&&u.addEventListener("click",function(e){return function(t){return e.elements.closeNaggerSetup.parentNode.classList.remove("show"),document.cookie="widgetAnnoyer=true; expires="+e.durationToGMT(1)}}(this)),document.cookie.indexOf("widgetAnnoyer")<0&&null!=(c=this.elements.closeNaggerSetup)&&c.parentNode.classList.add("show"),null!=(d=this.elements.closeNaggerTestimonial)&&d.addEventListener("click",function(e){return function(t){return e.elements.closeNaggerTestimonial.parentNode.classList.remove("show"),document.cookie="testimonialAnnoyer=true; expires="+e.durationToGMT(100)}}(this)),document.cookie.indexOf("testimonialAnnoyer")<0&&null!=(m=this.elements.closeNaggerTestimonial)&&m.parentNode.classList.add("show")}return o(t,e),t.prototype.switchModule=function(e){var t,n,o;return null!=e&&e.stop(),t=document.getElements("#global-nav .gnItem"),t.removeClass("selected"),o=document.getElement(".roadmapModule"),n=document.getElements(".changelogModule"),this.parentNode.addClass("selected"),this.href.indexOf("roadmap")>=0?(o.show(),n.hide()):(o.hide(),n.show())},t.prototype.requestModule=function(e){var t,n,o,i,r,s,l,a;return e.stop(),l=document.getElement(".postmsg.ok"),o=document.getElement(".postmsg.fail"),i=document.getElement(".postmsg.fail span"),t=document.getElement(".buttonCta"),n=this.elements.mailchimp,r=n.querySelector("#mce-EMAIL").value,s=n.querySelector("#mce-FNAME").value,a=new Request.JSONP({url:n.action,callbackKey:"c",data:{EMAIL:r,FNAME:s},onRequest:function(){return t.classList.add("disable")},onComplete:function(e){return"success"===e.result&&(l.show(),o.hide(),t.hide()),"error"===e.result&&(o.show(),i.innerHTML=e.msg),t.classList.remove("disable")}}),a.send()},t.prototype.date2moment=function(){var e;return e=document.querySelectorAll("#changelog-list time a"),this.eachElement(e,function(e){return function(t){var n;if(n=t.parentNode.getAttribute("datetime"),moment(n).isValid())return t.innerHTML=e.momentTo(n)}}(this))},t.prototype.loadMore=function(e){var t,n;return e.preventDefault(),e.stopPropagation(),n=function(e){return function(t){var n,o,i,r,s,l;if(s=document.querySelector("#changelog-list .listBody"),t.data)for(l=t.data.changelogs,i=0,r=l.length;i<r;i++)n=l[i],window.EditorData.changelogs.push(n);return t.html&&(o=e.createHTML(t.html),s.appendChild(o),e.date2moment()),t.last_page&&e.elements.loadMore.classList.add("hidden"),e.nextPage=e.nextPage+1}}(this),t=new Request.JSON({url:document.location.href,method:"get",data:{authenticity_token:this.token,page:this.nextPage},onComplete:n}),t.send()},t.prototype.showBanner=function(e,t){var n,o;return n=document.querySelector(".awesomeBanner"),o=n.querySelector("span"),o.innerText=e||"Blank",n.classList.add("show"),n.classList.add(t),setTimeout(function(e){return function(){return e.closeBanner()}}(this),5e3)},t.prototype.closeBanner=function(){return this.elements.banner.classList.add("hide"),setTimeout(function(e){return function(){return e.elements.banner.className="awesomeBanner"}}(this),300)},t.prototype.hexToRgb=function(e,t){var n,o,i;return e=e.replace("#",""),i=parseInt(e.substring(0,2),16),o=parseInt(e.substring(2,4),16),n=parseInt(e.substring(4,6),16),i+","+o+","+n},t.prototype.setLayoutColor=function(e){var t,n;if(""===e&&(e="#3778ff"),t=this.hexToRgb(e),n="a,\n#settings-cont #tabs ul .active a {\n  color: "+e+";\n}\n\n#settings-cont .formActions input,\n#settings-cont .button,\n#settings-cont .formActions .button,\n#settings-cont .fieldCont.avatarField .fauxButton,\n#editor-body .submitCont .actions .save a,\n#integrations .button,\n#global-nav,\n#global-nav li.selected:before,\n#settings-cont nav .hl,\n.switchCustom input[type=checkbox]:checked + .switchCont .switchToggle {\n  background-color: "+e+";\n}\n\n.switchCustom input[type=checkbox]:checked + .switchCont {\n  background-color: rgba("+t+", 0.2);\n}\n\n#settings-cont #tabs ul .active a,\n#settings-cont .fieldCont select:hover,\n#settings-cont .fieldCont input[type=text]:focus,\n#settings-cont .fieldCont input[type=password]:focus,\n#main-nav ul .active a,\n#settings-cont.free #pricing .planItem:first-child,\n#settings-cont.pro #pricing .planItem:last-child,\n#nav-cont ul .accountItem.active a,\n.newPost a .icon {\n  border-color: "+e+";\n}",e.length>=4||e.length<=7)return document.querySelector("#custom-accent").innerHTML=n},t}(this.Utilities),window.addEventListener("DOMContentLoaded",function(n){return new e,this.LayoutBaseManager=new t})}).call(this);